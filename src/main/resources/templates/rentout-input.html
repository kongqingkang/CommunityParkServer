<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <!--initial-scale缩放比例-->
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>出租发布</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
    <link rel="stylesheet" href="css/me.css">
</head>
<body>
<!--导航-->
<!--导航-->
<nav th:replace="_fragments :: menu(2)" class="ui inverted attached segment m-padded-tb-mini m-shadow-small">
    <div class="ui container">
        <div class="ui inverted secondary stackable menu">
            <h2 class="ui teal header item">车位共享</h2>
            <a href="#" class="m-item item m-mobile-hide"><i class="home icon"></i>首页</a>
            <a href="#" class="m-item item m-mobile-hide"><i class="idea icon"></i>发布</a>
            <a href="#" class="m-item item m-mobile-hide"><i class="tags icon"></i>认证</a>
            <a href="#" class="m-item item m-mobile-hide"><i class="clone icon"></i>归档</a>
            <a href="#" class="active m-item item m-mobile-hide"><i class="info icon"></i>个人信息</a>
            <div class="right m-item item m-mobile-hide menu">
                <div class="ui dropdown item" style="margin-left: 50px !important;">
                    <div class="text">
                        <img src="https://unsplash.it/100/100?image=1006" alt="" class="ui avatar image">
                        孔庆康
                    </div>
                    <i class="dropdown icon"></i>
                    <div class="menu">
                        <a th:href="@{logout}" href="#" class="item">注销</a>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <a href="#" class="ui menu toggle black icon button m-right-top m-mobile-show">
        <i class="sidebar icon"></i>
    </a>
</nav>
<div class="ui attached pointing menu">
    <div class="ui container">
        <div class="right menu">
            <a th:href="@{getRentInput}" href="#" class="item">求租发布</a>
            <a th:href="@{getRentOutInput}" href="#" class="active teal item">出租发布</a>
        </div>
    </div>
</div>
<!--中间-->
<div class="m-container-small m-padded-tb-large">
    <div class="ui container">
       <form class="ui form">
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label class="ui compact teal basic label">标题</label>
                       <input type="text" id="title" name="title" placeholder="请输入标题……">
                   </div>
               </div>
           </div>
            <div class="two fields">
                <div class="required field">
                    <div class="ui left labeled input">
                        <label class="ui compact teal basic label">姓  名</label>
                        <input type="text" id="truthName" name="truthName" placeholder="请输入姓名……">
                    </div>
                </div>
            </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label class="ui compact teal basic label">联系方式</label>
                       <input type="text" id="mobile" name="mobile" placeholder="请输入联系方式……">
                   </div>
               </div>
           </div>
<!--           <div class="two fields">-->
<!--               <div class="required field">-->
<!--                   <div class="ui left labeled input">-->
<!--                       <label class="ui compact teal basic label">社区名</label>-->
<!--                       <input type="text" id="communityName" name="communityName" placeholder="请输入社区名……">-->
<!--                   </div>-->
<!--               </div>-->
<!--           </div>-->
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label class="ui compact teal basic label">车位地址</label>
                       <input type="text" id="parkAddress" name="parkAddress" placeholder="请输入车位地址……">
                   </div>
               </div>
           </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label class="ui compact teal basic label">车位号</label>
                       <input type="text" id="parkName" name="parkName" placeholder="请输入车位号……如A13">
                   </div>
               </div>
           </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui labeled input">
                       <label class="ui compact teal basic label">长租/短租</label>
                       <div class="required inline fields" style="padding-left: 1.5em">
                           <div class="field">
                               <div class="ui radio checkbox">
                                   <input type="radio" name="longFlag" checked="checked" tabindex="0" class="hidden" value="0">
                                   <label class="label" style="font-size: 13pt">长租</label>
                               </div>
                           </div>
                           <div class="field">
                               <div class="ui radio checkbox">
                                   <input type="radio" name="longFlag" tabindex="0" class="hidden" value="1">
                                   <label  style="font-size: 13pt">短租</label>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label class="ui compact teal basic label">时间段</label>
                       <input type="text" id="startTime" name="startTime" placeholder="请按‘2020-4-17’格式输入起始时间……">
                       <span style="padding: 8px 2px 0 2px ">至</span>
                       <input type="text" id="endTime" name="endTime" placeholder="请按‘2020-4-18’输入终止时间……">
                   </div>
               </div>
           </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui labeled input">
                       <label class="ui compact teal basic label">是否免费</label>
                       <div class="required inline fields" style="padding-left: 1.5em">
                           <div class="field">
                               <div class="ui radio checkbox">
                                   <input type="radio" name="freeFlag" tabindex="0" class="hidden" value="0">
                                   <label class="label" style="font-size: 13pt">免费</label>
                               </div>
                           </div>
                           <div class="field">
                               <div class="ui radio checkbox">
                                   <input type="radio" name="freeFlag" checked="checked" tabindex="0" class="hidden" value="1">
                                   <label  style="font-size: 13pt">收费</label>
                               </div>
                           </div>
                       </div>
                   </div>
               </div>
           </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label for="price" class="ui compact teal basic label">费用￥</label>
                       <input type="text" id="price" name="price" placeholder="请输入费用……">
                   </div>
               </div>
           </div>
           <div class="two fields">
               <div class="required field">
                   <div class="ui left labeled input">
                       <label class="ui compact teal basic label">备注</label>
                   </div>
                   <textarea id="description" name="description" placeholder="请输入一些介绍信息……"></textarea>
                   </div>
               </div>
<!--           <div class="two fields">-->
<!--               <div class="required field">-->
<!--                   <div class="ui left labeled input">-->
<!--                       <label class="ui compact teal basic label">车位图片</label>-->
<!--                   </div>-->
<!--                   <img src="../static/images/wechat.jpg" class="ui huge rounded image" alt="" style="width: 10em;height: 10em;">-->
<!--                   <button class="ui teal button" style="margin-left: 120px">上传</button>-->
<!--               </div>-->
<!--           </div>-->
            <div class="ui error message"></div>
            <div class="ui center aligned container">
                <button type="button" class="ui button" onclick="window.history.go(-1)">返回</button>
                <button class="ui teal button">发布</button>
            </div>
        </form>
    </div>
</div>
<!--底部-->
<footer th:replace="_fragments::footer" class="ui inverted vertical segment m-padded-tb-massive">
    <div class="ui center aligned container">
        <div class="ui inverted divided stackable grid"><!--stackable代表可堆叠-->
            <div class="three wide column">
                <div class="ui inverted link list">
                    <div class="item">
                        <img src="../static/images/wechat.jpg" class="ui rounded image" alt="" style="width: 7em">
                    </div>
                </div>
            </div>
            <div class="three wide column">
                <h4 class="ui inverted header m-text-thin m-text-lined m-text-sapced">最新发布</h4>
                <div class="ui inverted link list m-text-thin m-opacity-mini m-text-lined m-text-sapced">
                    <a href="#" class="item">用户故事</a>
                    <a href="#" class="item">用户故事</a>
                    <a href="#" class="item">用户故事</a>
                </div>
            </div>
            <div class="four wide column">
                <h4 class="ui inverted header header m-text-thin m-text-lined m-text-sapced">联系我</h4>
                <div class="ui inverted link list m-text-thin m-opacity-mini m-text-lined m-text-sapced">
                    <a href="#" class="item">Email:1170830826@qq.com</a>
                    <a href="#" class="item">QQ:1170830826</a>
                </div>
            </div>
            <div class="six wide column">
                <h4 class="ui inverted header header m-text-thin m-text-lined m-text-sapced">车位平台</h4>
                <p class="m-text-thin m-opacity-mini m-text-lined m-text-sapced">致力于打造一个非常好的社区车位共享平台，为大家带来优质的服务！</p>
            </div>
        </div>
        <div class="ui inverted section divider"></div>
        <p>Copyright © 2019-2020 kongqingkang Designed by kongqingkang</p>
    </div>
</footer>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.2/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
<script src="js/myInfo.js"></script>
<script>
    $('.menu.toggle').click(function () {
        $('.m-item').toggleClass('m-mobile-hide');
    });
    $('.ui.dropdown').dropdown({
        on: 'hover'
    });
    $('.ui.radio.checkbox')
        .checkbox()
    ;
    $(document).ready(function(){
        init();
    });
    $('.ui.form').form({
        fields: {
            title: {
                identifier: 'title',
                rules: [{
                    type: 'empty',
                    prompt: '标题：请输入博客标题!'
                }]
            },
            truthName: {
                identifier: 'truthName',
                rules: [{
                    type: 'empty',
                    prompt: '请输入姓名……'
                }]
            },
            mobile: {
                identifier: 'mobile',
                rules: [{
                    type: 'empty',
                    prompt: '请输入手机号……'
                }]
            },
            // communityName: {
            //     identifier: 'communityName',
            //     rules: [{
            //         type: 'empty',
            //         prompt: '请输入社区地址……'
            //     }]
            // },
            parkAddress: {
                identifier: 'parkAddress',
                rules: [{
                    type: 'empty',
                    prompt: '请输入车位地址……'
                }]
            },
            parkName: {
                identifier: 'parkName',
                rules: [{
                    type: 'empty',
                    prompt: '请输入车位号……'
                }]
            },
            startTime: {
                identifier: 'startTime',
                rules: [{
                    type: 'empty',
                    prompt: '请输入开始时间……'
                }]
            },
            endTime: {
                identifier: 'endTime',
                rules: [{
                    type: 'empty',
                    prompt: '请输入结束时间……'
                }]
            },
            price: {
                identifier: 'price',
                rules: [{
                    type: 'empty',
                    prompt: '请输入价格……'
                }]
            },
            description: {
                identifier: 'description',
                rules: [{
                    type: 'empty',
                    prompt: '请输入备注信息……'
                }]
            }
        },
        onSuccess: function(e) {
            //阻止表单的提交
            e.preventDefault();
            var title= $('#title').val();
            var truthName= $('#truthName').val();
            var mobile= $('#mobile').val();
            // var communityName= $('#communityName').val();
            var parkName= $('#parkName').val();
            var parkAddress= $('#parkAddress').val();
            var longFlag=$('.radio.checkbox input[name="longFlag"]:checked').val();
            //var tencent= $('#tencent').val();
            var startTime= $('#startTime').val();
            var endTime= $('#endTime').val();
            var freeFlag=$('.radio.checkbox input[name="freeFlag"]:checked').val();
            var price= $('#price').val();
            var description= $('#description').val();
            var data = {
                title : title,
                truthName : truthName,
                mobile : mobile,
                // communityName : communityName,
                parkName : parkName,
                parkAddress : parkAddress,
                longFlag : longFlag,
                //tencent : tencent,
                startTime : startTime,
                endTime : endTime,
                freeFlag : freeFlag,
                price:price,
                description : description,
            }
            $.ajax({
                type: "POST",
                async : false,
                serializeForm: true,
                url: "rentOutInput",
                data:JSON.stringify(data),
                contentType:"application/json;charset=UTF-8",
                dataType: "json",
                success: function (res) {
                    if (res.code==0){
                        alert("发布成功！")
                    }
                    else{
                        alert(res.msg);
                        alert("---发布失败！---");
                        window.location.href="getRentOutInput";
                    }
                },
                error:function (res) {
                    console.log(res.msg);
                    alert("---emmmm,你的网络有点问题！---");
                }
            });
        }
    });



</script>
</body>
</html>